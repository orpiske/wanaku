quarkus.banner.enabled=false
quarkus.devservices.enabled=false
quarkus.console.enabled=false
quarkus.http.port=8080
quarkus.grpc.server.use-separate-server=false

# Wanaku internal NS
quarkus.mcp.server.wanaku-internal.sse.root-path=/wanaku-internal/mcp

# Namespaces must be set in build time
quarkus.mcp.server.ns-1.sse.root-path=/ns-1/mcp
quarkus.mcp.server.ns-2.sse.root-path=/ns-2/mcp
quarkus.mcp.server.ns-3.sse.root-path=/ns-3/mcp
quarkus.mcp.server.ns-4.sse.root-path=/ns-4/mcp
quarkus.mcp.server.ns-5.sse.root-path=/ns-5/mcp
quarkus.mcp.server.ns-6.sse.root-path=/ns-6/mcp
quarkus.mcp.server.ns-7.sse.root-path=/ns-7/mcp
quarkus.mcp.server.ns-8.sse.root-path=/ns-8/mcp
quarkus.mcp.server.ns-9.sse.root-path=/ns-9/mcp
quarkus.mcp.server.ns-10.sse.root-path=/ns-10/mcp

quarkus.http.cors.enabled=true
quarkus.http.cors.origins=http://localhost:8080,http://127.0.0.1:8080,http://localhost:5173,http://localhost:6274

quarkus.mcp.server.traffic-logging.enabled=true
quarkus.mcp.server.traffic-logging.text-limit=1000000
quarkus.mcp.server.server-info.name=Wanaku
quarkus.mcp.server.client-logging.default-level=debug
quarkus.mcp.server.server-info.version=0.0.8

# Auth
quarkus.oidc.enabled=true

# Address of the Keycloak authentication server - adjust to your Keycloak instance
auth.server=http://localhost:8543
# Address used by the OIDC proxy -
auth.proxy=http://localhost:${quarkus.http.port}

# Address of the KeyCloak authentication server
quarkus.oidc.auth-server-url=${auth.server}/realms/wanaku

# Client identifier configured in Keycloak for the backend service
quarkus.oidc.client-id=wanaku-mcp-router

# Wanaku uses hybrid, as it is both a web application and a service
quarkus.oidc.application-type=hybrid
quarkus.oidc.tls.verification=none
# URL path where users can log out from the application (don't change)
quarkus.oidc.logout.path=/logout
quarkus.oidc.discovery-enabled=true
quarkus.oidc.resource-metadata.enabled=true

# This helps the metadata handler be aware that we are using the OIDC proxy (don't change)
quarkus.oidc.resource-metadata.authorization-server=${auth.proxy}/q/oidc

# Avoid forcing HTTPS
quarkus.oidc.resource-metadata.force-https-scheme=false

# These configure the special rules for the restricted MCP namespaces
quarkus.oidc.mcp.resource-metadata.authorization-server=${auth.proxy}/q/oidc
quarkus.oidc.mcp.auth-server-url=${auth.server}/realms/wanaku
quarkus.oidc.mcp.tenant-paths=/mcp/*, /ns-1/*, /ns-2/*, /ns-3/*, /ns-4/*, /ns-5/*, /ns-6/*, /ns-7/*, /ns-8/*, /ns-9/*, /ns-10/*
quarkus.oidc.mcp.token.audience=wanaku-mcp-client
quarkus.oidc.mcp.resource-metadata.enabled=true
quarkus.oidc.mcp.resource-metadata.resource=mcp
quarkus.oidc.mcp.resource-metadata.force-https-scheme=false

quarkus.oidc-proxy.enabled=true
quarkus.oidc-proxy.root-path=/q/oidc
# Make sure to use the configurations for the MCP tenant instead of the default ones
quarkus.oidc-proxy.tenant-id=mcp

# Paths used by the OIDC Proxy, which need to be public
quarkus.http.auth.permission.oidcproxy.paths=/.well-known/oauth-protected-resource/*, /.well-known/oauth-authorization-server/*, /q/oidc/*
quarkus.http.auth.permission.oidcproxy.policy=permit

# Management APIs
quarkus.http.auth.permission.authenticated.paths=/api/v1/management/*
quarkus.http.auth.permission.authenticated.policy=authenticated

# Restricted MCP namespaces
quarkus.http.auth.permission.mcp-authenticated.paths=/mcp/*, /ns-1/*, /ns-2/*, /ns-3/*, /ns-4/*, /ns-5/*, /ns-6/*, /ns-7/*, /ns-8/*, /ns-9/*, /ns-10/*
quarkus.http.auth.permission.mcp-authenticated.policy=authenticated

# Public APIs and static resources
quarkus.http.auth.permission.public.paths=/api/v1/*, /index.html, /*
quarkus.http.auth.permission.public.policy=permit

## Admin UI, which requires authentication for all paths in the web interface
quarkus.http.auth.permission.web.paths=/admin/*, /admin, /node_modules/*
quarkus.http.auth.permission.web.policy=authenticated

# Logging configuration
quarkus.http.access-log.enabled=true
quarkus.log.level=INFO
quarkus.log.category."ai.wanaku".level=DEBUG
quarkus.log.category."io.quarkiverse.mcp".level=DEBUG
quarkus.log.category."io.quarkiverse.quinoa".level=WARN
quarkus.log.category."io.quarkus.oidc.proxy".level=DEBUG

%dev.quarkus.log.category."org.apache.http".level=INFO

%test.quarkus.log.file.enable=true
%test.quarkus.log.file.path=target/wanaku.log
%test.quarkus.log.file.format=%d{yyyy-MM-dd HH:mm:ss} %-5p [%c] (%t) %s%e%n

%test.quarkus.log.category."org.apache.http".level=INFO

quarkus.smallrye-openapi.store-schema-directory=src/main/webui/

# Quinoa configuration
quarkus.quinoa=true
quarkus.quinoa.ui-dir=../ui/admin
quarkus.quinoa.build-dir=dist
quarkus.quinoa.ui-root-path=/admin
quarkus.quinoa.enable-spa-routing=true
quarkus.quinoa.ci=true
quarkus.quinoa.package-manager=yarn
quarkus.quinoa.package-manager-install=true
quarkus.quinoa.package-manager-install.yarn-version=1.22.22
quarkus.quinoa.package-manager-install.node-version=22.18.0
quarkus.quinoa.package-manager-install.pnpm-version=10.14.0
quarkus.quinoa.force-install=true
quarkus.quinoa.package-manager-command.ci=install
quarkus.quinoa.package-manager-command.build=run build
quarkus.quinoa.package-manager-command.build-env.VITE_API_URL=""
quarkus.quinoa.package-manager-command.dev-env.VITE_API_URL=\"http://localhost:8080\"
quarkus.quinoa.package-manager-command.dev=run dev
quarkus.quinoa.package-manager-command.test=run test